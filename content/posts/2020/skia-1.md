---
title: "Skia 源码分析 - Chapter 1"
subtitle: "介绍"
date: 2020-11-03T10:28:31+08:00
categories: ["cs"]
tags: ["graphics", "skia"]
---

## 目录

* [Chapter 1 - 介绍](/posts/skia-1/)
* [Chapter 2 - 开发环境准备](/posts/skia-2/)
* [Chapter 3 - 模块初探](/posts/skia-3/)
* [Chapter 4 - 牛刀小试](/posts/skia-4/)
* ...

## 引言

欢迎来到计算机图形学的世界。哦，不，确切地讲，是二维计算机图形学的世界。

你可能会觉得，与你熟悉的三维图形相比，二维图形既没啥技术挑战，也不受重视。其实不然。
- 首先，二维图形在技术实现上并不比三维图形简单，在某种程度上来讲甚至更难。
- 其次，二维图形在应用广泛程度上比三维图形更大。我们都知道，三维图形在游戏、影视中是被广泛应用的。但二维图形却早在与我们的生活工作更息息相关的地方成为不可或缺的一部分了。

为什么这么说呢？可以简单这么理解。

首先，现代图形处理单元（即 GPU）在硬件上就是为三维图形而生的，而各种图形接口（如 OpenGL、Metal、DirectX 等）也是针对三维图形而设计的。虽然说可以使用针对三维的图形接口让 GPU 为二维图形工作，但这并不是一个简单的投影就完事了。二维图形有自己的一套“业务逻辑”。拿领域专用语言（Domain-Specific Language，简称 DSL）来打比方，用于构建三维图形的 DSL 与二维图形的 DSL 是完全不同的，我们需要构建一个复杂的“编译器”，将一种 DSL 编译到另外一种 DSL 上去。

当然，这是在假定使用 GPU 来实现二维图形的情况下。如果是用 CPU 来实现，这已经是一个非常成熟与古老的学问了，但在绘制效率上是比较低效的。

其次，二维图形技术已经成为用户界面重要的基石。比如说，浏览器中，你正在浏览的网页（包括图形与文字），就是由浏览器中的二维图形引擎所绘制出来的。而手机上，包括系统界面在内的所有 App 也都是由手机系统中的二维图形引擎所绘制出来的。虽然说某些手机厂商正在努力在其渲染引擎里加入三维特效的部分，但不可否认其用户界面还是以二维图形的绘制为主。

我们接下来会和你一起来分析 Skia 这个二维图形引擎的源码，探索二维图形学这个鲜为人知的世界。

在那之前，我们先来聊下 Flutter。Flutter 是由 Google 推出的一款跨平台的 App 开发工具包，支持 PC 端、移动端甚至网页端应用的开发。Flutter 上层是使用 Dart 语言开发的，但这个当然不关我们啥事。Flutter 之所以能够在每个平台下都获得一致的用户界面，就是因为他使用了 Skia 作为渲染底层。而在这之前，Skia 早已经被用在 Google Chrome 浏览器里用于渲染网页了。和渲染网页一个道理，Flutter 用 Skia 绘制出了系统无关（或者说跨系统一致）的用户界面，从而获得一致的用户体验，并直接降低了不同系统下 App 的开发成本（因为不同平台下可以使用同一套代码）。

言归正传，首先让我们来简单认识下 Skia ，一款市面上被应用最广、可能是最强、并且能够得到全部源码的开源二维图形引擎。

## Skia 历史

Skia 一开始由 Michael Reed 创办的 Skia 公司开发，被 Google 在 2005 年收购之后，于 2008 年以 New BSD 许可证[开源](http://www.satine.org/archives/2008/09/02/skia-source-code-released/)。其实在开源之前，Skia 就已经承担起 Google Chrome 与 Android 上的二维图形的渲染任务了。就算从 2005 年开始算起，Skia 到现在也已经有 15 年的历史了。

## Skia 版本

Skia 是基于 Milestone 的方式进行版本发布。大概每一个半月会发布一个 Milestone。可以在 Skia 官网上看到 Skia 发布过所有的 Milestone 的[变更信息](https://skia.org/user/release/release_notes)以及目前 Skia Milestone 的[发布计划](https://skia.org/user/release/schedule)。

## Skia 源码获取

Skia 源码托管在 Google 自己的 Git 源码服务器上，可以参考官网[下载页面](https://skia.org/user/download)来获取。另外，在 Github 上也有 Skia 源码[镜像](https://github.com/google/skia/)，与主源码库基本保持同步。

因为是使用 Git 来进行源码管理，这里就不再赘述了。
